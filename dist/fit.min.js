"use strict";(function(){function fit(str,opts){function tokenizer(e){var t=e.split(options.l_del);return t.reduce(function(e,t){if(t.indexOf(options.r_del)>-1){var n=t.split(options.r_del);return e.push(options.l_del+"OP_"+n[0].trimLeft()),e.push(n[1]),e}return e.push(t),e},[])}function parser(e){var t=[],n=[];if(e.forEach(function(e){if(0===e.indexOf(options.l_del+"OP_")){var r=e.substr(5),o=r.trim().split(/ |\$/)[0];if(oplist.indexOf(o)>-1)switch(o){case"=":n.length>0?n[n.length-1].else?n[n.length-1].else.push(exp["="](r)):n[n.length-1].param.push(exp["="](r)):t.push(exp["="](r));break;case"for":n.push({exp:r,param:[]});break;case"endfor":var p=n.pop();n.length>0?n[n.length-1].else?n[n.length-1].else.push(exp.for(p.exp,p.param)):n[n.length-1].param.push(exp.for(p.exp,p.param)):t.push(exp.for(p.exp,p.param));break;case"if":n.push({exp:r,param:[]});break;case"else":n[n.length-1].else=[];break;case"endif":var p=n.pop();n.length>0?n[n.length-1].else?n[n.length-1].else.push(exp.if(p.exp,p.param,p.else)):n[n.length-1].param.push(exp.if(p.exp,p.param,p.else)):t.push(exp.if(p.exp,p.param,p.else))}else n.length>0?n[n.length-1].else?!!n[n.length-1].else.push(options.l_del+"unknown("+o+")"+options.r_del):n[n.length-1].param.push(options.l_del+"unknown("+o+")"+options.r_del):t.push(options.l_del+"unknown("+o+")"+options.r_del)}else n.length>0?n[n.length-1].else?n[n.length-1].else.push(e):n[n.length-1].param.push(e):t.push(e)}),n.length>0)throw"`for` or `if` statement not terminated.";return t}function render(e,t){return e.reduce(function(e,n){return"function"==typeof n?2===n.length?e+n(t,t):e+n(t):e+n},"")}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),"function"!==String.prototype.trimLeft&&(String.prototype.trimLeft=function(){return this.replace(/^[\s\uFEFF\xA0]+/g,"")});var options={l_del:"{{",r_del:"}}",pre:"yes",async:"no"};opts&&(options.l_del=opts.l_del?opts.l_del:"{{",options.r_del=opts.r_del?opts.r_del:"}}",options.pre=opts.pre&&("yes"===opts.pre||"no"===opts.pre)?opts.pre:"yes",options.async=opts.async&&("yes"===opts.pre||"no"===opts.pre)?opts.async:"no");var oplist=["=","for","endfor","if","else","endif"],exp={"=":function(_exp){return function(data){var e=_exp.substr(1).trim();return e=e.replace(/\$/g,"data."),eval(e)}},for:function(e,t){var n=e.substr(3).trim().split("as"),r=n[0].trim().substr(1),o=n.length<2?"_i":n[1].trim().substr(1);return function(e,n){var p=r.split(".").reduce(function(e,t){return e[t]},e),s=r.substr(0,r.lastIndexOf(".")).split(".").reduce(function(e,t){return e[t]},e),i="";return p.forEach(function(e,r){var p={};null===e||"undefined"==typeof e||"symbol"==typeof e||"object"!=typeof e&&"function"!=typeof e?(p[o]={},p[o].toString=function(){return null===e?"null":"undefined"==typeof e?"undefined":e.toString()}):p[o]=e,p[o]._index=r,p[o]._global=n,p[o]._parent=s,i+=t.reduce(function(e,t){return"function"==typeof t?2==t.length?e+t(p,n):e+t(p):e+t},"")}),i}},if:function(_exp,_param,_else){var e=_exp.substr(2).trim();return function(data){e=e.replace(/\$/g,"data.");var s=eval(e)?_param:_else;return s?s.reduce(function(e,t){return"function"==typeof t?2===t.length?e+t(data,data):e+t(data):e+t},""):""}}},parsed;return"yes"===options.pre&&(parsed=parser(tokenizer(str))),function(e,t){return void 0===parsed&&(parsed=parser(tokenizer(str))),"yes"!==options.async||"function"!=typeof t?render(parsed,e):void setTimeout(function(){t(render(parsed,e))},0)}}var root=this,old_fit;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=fit),exports.fit=fit):(old_fit=root.fit,root.fit=fit,fit.noConflict=function(){return root.fit=old_fit,fit})}).call(this);
//# sourceMappingURL=dist/fit.min.js.map